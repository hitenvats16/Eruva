(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{9530:function(e,t,a){Promise.resolve().then(a.bind(a,7606))},3004:function(e,t,a){"use strict";a.d(t,{K1:function(){return o},Yu:function(){return r},gq:function(){return n},jU:function(){return i},sH:function(){return l}});var s=a(2060);let n=()=>(0,s.Z)("/api/organisation",{method:"GET",body:null}),r=e=>(0,s.Z)("/api/organisation",{method:"POST",body:e}),i=e=>(0,s.Z)("/api/organisation/".concat(e),{method:"GET",body:null}),o=(e,t)=>(0,s.Z)("/api/organisation/".concat(e),{method:"PUT",body:t}),l=e=>(0,s.Z)("/api/organisation/".concat(e),{method:"DELETE",body:null})},8783:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var s=a(3827),n=a(4090),r=a(2235),i=a(9259),o=a(248),l=a(2670),c=a(1270),d=a(3004),h=a(6676),u=a(3803),m=a(7767),g=a(4734);let x=o.z.object({name:o.z.string().min(1,"Name must have one character").max(200,"Name is too long")});function v(e){var t;let a,o,{active:v,visibilityDispatcher:f,type:j,prevValues:b,orgId:y}=e,E=null;switch(j){case"CREATE":E="Create New Organisation",o=d.Yu;break;case"UPDATE":E="Update Organisation Details",o=e=>{if(y)return(0,d.K1)(y,e);throw Error("org id must be provided")},a=b}let[p,N]=(0,n.useState)("IDLE"),{register:C,handleSubmit:w,formState:{errors:Z},reset:A}=(0,l.cI)({resolver:(0,c.F)(x),defaultValues:a}),S=async e=>{try{N("LOADING"),await o(e),N("SUCCESS"),"CREATE"===j?(0,h.z)(["organisations"]):(0,h.z)(["organisation",y]),f(!1),A(),setTimeout(()=>{N("IDLE")},1e3)}catch(e){N("ERROR")}};return(0,s.jsx)(u.Z,{onClose:()=>{f(!1)},active:v,title:E,children:(0,s.jsxs)("form",{onSubmit:w(S),children:[(0,s.jsx)(m.Z.Field.Input,{label:"CREATE"===j?"What's the name?":"What's the new name?",...C("name"),error:null===(t=Z.name)||void 0===t?void 0:t.message}),(0,s.jsxs)(g.Z,{block:!0,className:"mt-5",loading:"LOADING"===p,state:"ERROR"===p?"error":"SUCCESS"===p?"success":"none",children:["IDLE"===p&&"Create","ERROR"===p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{className:"w-4 h-4"}),"Some Error Occured"]}),"SUCCESS"===p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Done"]})]})]})})}},7606:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(3827);let n=(0,a(7461).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var r=a(489),i=a(3967),o=a(4090),l=a(7907),c=a(6540),d=a(4734),h=a(2171),u=a(5995),m=a(3004),g=a(8783),x=a(703),v=a(6480),f=a.n(v),j=a(8792),b=a(3696),y=a(94),E=a(2544),p=a(9793),N={src:"/_next/static/media/chatbot.05d240e9.png",height:728,width:723,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAyUlEQVR42hWOzQoBURiGv9uShSR3wUIsXcAsFRuxQ5lSSNQw8rdAJFFGopmtskNjzMoc5hgzzvGpZ/E+z+oFzrn3ZcudU2hZCA5UjOB6rNy2IUrSlScCEYKKEWabN8QtaUL36vGgHttTivqPQpGUZWelaP5w0BcKrBVVlB2hQCCZI6czb9ZLEEsgjWoJNZknMFhQoWgvV5rcH0ndobLVsjW7N6fguiwlvsTO43o533RdGluZyuvjMsBn1OGGaRmGbprG7U7om3HOf2iZkUsdHo/zAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},C=a(2235),w=a(9259),Z=a(248),A=a(2670),S=a(6676),R=a(1270),O=a(3803),D=a(7767);let U=Z.z.object({name:Z.z.string().min(1,"Name must have one character").max(50,"Name is too long")});var z=function(e){var t;let{active:a,visibilityDispatcher:n,orgId:r,type:i="CREATE"}=e,[l,c]=(0,o.useState)("IDLE"),{register:h,handleSubmit:u,formState:{errors:m},reset:g}=(0,A.cI)({resolver:(0,R.F)(U)}),x=async e=>{if(r)try{c("LOADING"),await (0,p.Ay)({orgId:r,payload:e}),c("SUCCESS"),(0,S.z)(["organisation",r,"chatbots"]),n(!1),g(),setTimeout(()=>{c("IDLE")},1e3)}catch(e){c("ERROR")}};return(0,s.jsx)(O.Z,{onClose:()=>{n(!1)},active:a,title:"Create new Chatbot",children:(0,s.jsxs)("form",{onSubmit:u(x),children:[(0,s.jsx)(D.Z.Field.Input,{label:"What's the name?",...h("name"),error:null===(t=m.name)||void 0===t?void 0:t.message}),(0,s.jsxs)(d.Z,{block:!0,className:"mt-5",loading:"LOADING"===l,state:"ERROR"===l?"error":"SUCCESS"===l?"success":"none",children:["IDLE"===l&&"Create","ERROR"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C.Z,{className:"w-4 h-4"}),"Some Error Occured"]}),"SUCCESS"===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(w.Z,{className:"w-4 h-4"}),"Done"]})]})]})})};function F(e){var t,a,n;let{orgId:r}=e,i=(0,c.a)({queryKey:["organisation",r,"chatbots"],queryFn:()=>(0,p.ED)({orgId:r}),refetchOnWindowFocus:!1}),l=i.isLoading||i.isFetching,[u,m]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{b.ZP.fromTo(".chatbotCards",{yPercent:50,opacity:0},{yPercent:0,stagger:.05,delay:.3,opacity:1,ease:"elastic.out(1,0.3)"})},[i.data,l]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"h-screen p-5 mt-4 overflow-scroll bg-white rounded-lg max-h-container",children:[(null===(t=i.data)||void 0===t?void 0:t.length)===0&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full gap-3",children:[(0,s.jsx)(h.Z.Content,{boldness:600,size:"sm",className:"text-gray-400",children:"You don't have any chatbots."}),(0,s.jsxs)(d.Z,{size:"small",className:"text-white",onClick:()=>{m(!0)},children:["Create ",(0,s.jsx)(y.Z,{className:"w-5 h-5"})]})]}),l&&(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full gap-3",children:(0,s.jsx)(E.Z,{color:"gray",size:"medium"})}),!l&&(null===(a=i.data)||void 0===a?void 0:a.length)!==0&&(0,s.jsxs)("div",{className:"grid grid-cols-5 gap-5",children:[null===(n=i.data)||void 0===n?void 0:n.map(e=>(0,s.jsx)(I,{chatbot:e,orgId:r},e.id)),(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full duration-150 ease-in-out rounded-lg bg-gray-50/60 hover:bg-gray-100/80 aspect-square chatbotCards",style:{opacity:0},children:(0,s.jsx)(d.Z,{color:"none",className:"bg-gray-600 btn-circle",onClick:()=>{m(!0)},children:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-white text-bold"})})})]})]}),(0,s.jsx)(z,{active:u,visibilityDispatcher:m,type:"CREATE",orgId:r})]})}function I(e){let{chatbot:t,orgId:a}=e;return(0,s.jsx)(j.default,{href:"/dashboard/organisation/".concat(a,"/chatbot/").concat(t.id),children:(0,s.jsxs)("div",{className:f()("flex relative flex-col overflow-hidden items-center justify-center w-full h-full duration-150 ease-in-out border-2 rounded-lg cursor-pointer aspect-square hover:shadow-md chatbotCards",{"border-primary":t.active,"border-gray-200":!t.active}),style:{opacity:0},children:[(0,s.jsx)(x.default,{src:N,width:64,height:64,alt:"org_logo",className:f()("w-16 h-16 mb-2")}),(0,s.jsx)(h.Z.Heading,{size:"base",fontFamily:"manrope",variant:"h4",boldness:700,className:"text-slate-950",children:t.name}),(0,s.jsx)("span",{className:f()("px-2 py-1 rounded-bl-lg absolute top-0 right-0",{"bg-primary text-white":t.active,"bg-gray-200 text-slate-950":!t.active}),children:(0,s.jsx)(h.Z.Content,{size:"xxs",boldness:700,fontFamily:"manrope",children:t.active?"Active":"Disabled"})})]})})}var k=a(5788),L=function(e){var t,a;let{orgId:x}=e,v=(0,l.useRouter)(),f=(0,c.a)({queryKey:["organisation",x],queryFn:()=>(0,m.jU)(x)}),j=f.isLoading||f.isFetching,[b,y]=(0,o.useState)(!1),[E,p]=(0,o.useState)(!1),N=async()=>{await (0,m.sH)(x),(0,S.z)(["organisations"]),v.back()};return(0,s.jsxs)(u.Z,{loading:j,error:f.error&&f.isError&&!j,children:[(0,s.jsx)("section",{className:"grid w-screen h-screen bg-slate-50 place-items-center",children:(0,s.jsxs)("div",{className:"w-full max-w-container",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(h.Z.Heading,{size:"5xl",boldness:700,fontFamily:"manrope",variant:"h1",className:"text-slate-950",children:null===(t=f.data)||void 0===t?void 0:t.name}),(0,s.jsx)(h.Z.Content,{size:"sm",className:"mt-4 text-slate-500",children:"Select or Create a chatbot from the given list."})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(d.Z,{color:"ghost",onClick:()=>{y(!0)},children:["Edit Details",(0,s.jsx)(n,{className:"w-4 h-4"})]}),(0,s.jsxs)(d.Z,{color:"none",state:"error",onClick:()=>{p(!0)},children:["Delete ",(0,s.jsx)(r.Z,{className:"w-3 h-3"})]})]})]}),(0,s.jsx)(F,{orgId:x}),(0,s.jsx)("div",{className:"w-full mt-5",children:(0,s.jsxs)(d.Z,{color:"none",onClick:()=>{v.push("/dashboard")},children:[(0,s.jsx)(i.Z,{className:"w-5 h-5"}),"Organisations"]})})]})}),(0,s.jsx)(g.Z,{active:b,visibilityDispatcher:y,orgId:x,prevValues:f.data,type:"UPDATE"}),(0,s.jsx)(k.Z,{onConfirm:N,active:E,visibilityDispatcher:p,matcher:"Delete ".concat(null===(a=f.data)||void 0===a?void 0:a.name),title:"Delete Organisation",text:"Organisation once deleted can not be retrieved."})]})}}},function(e){e.O(0,[922,250,578,334,426,293,322,971,69,744],function(){return e(e.s=9530)}),_N_E=e.O()}]);