(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{996:function(e,t,n){Promise.resolve().then(n.bind(n,2342))},9416:function(e,t,n){"use strict";n.d(t,{gF:function(){return s},kZ:function(){return r},Ai:function(){return l},PJ:function(){return o},w$:function(){return i}});var a=n(2060);function s(e){return(0,a.Z)("/api/auth/forgot-password",{method:"POST",body:{email:e.email}})}function r(e){return(0,a.Z)("/api/auth/forgot-password/handle",{method:"POST",body:{token:e.token,password:e.password}})}function l(){return(0,a.Z)("/api/profile",{method:"GET",body:null})}function i(){return(0,a.Z)("/api/profile/verify",{method:"POST",body:{type:"SEND"}})}function o(e){let{email:t,token:n}=e;return(0,a.Z)("/api/profile/verify",{method:"POST",body:{type:"HANDLE",email:t,token:n}})}},2060:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var a=n(9079);let s=a.env.NEXT_PUBLIC_DAHBOARD_BASE_URL?"".concat(a.env.NEXT_PUBLIC_DAHBOARD_BASE_URL,"/"):"http://localhost:3000/";a.env.NEXT_PUBLIC_CHATFRONT_URL;var r=n(241);async function l(e,t){let n={method:t.method};return"GET"!==t.method&&(n={...n,body:JSON.stringify(t.body)}),fetch(e.startsWith("http")?e:e.startsWith("/")?"".concat(s).concat(e.slice(1)):"".concat(s).concat(e),n).then(e=>i(e))}async function i(e){return e.text().then(t=>{let n=null;try{n=t&&JSON.parse(t)}catch(e){console.log("ERROR IN HANDLE RESPONSE BROWSER: ",e)}if(!e.ok){let t=n||e;throw console.log("error from browser api: ",t),new r.H({message:t.errors[0].message,status:e.status,path:t.errors[0].path})}return n})}},3004:function(e,t,n){"use strict";n.d(t,{K1:function(){return i},Yu:function(){return r},gq:function(){return s},jU:function(){return l},sH:function(){return o}});var a=n(2060);let s=()=>(0,a.Z)("/api/organisation",{method:"GET",body:null}),r=e=>(0,a.Z)("/api/organisation",{method:"POST",body:e}),l=e=>(0,a.Z)("/api/organisation/".concat(e),{method:"GET",body:null}),i=(e,t)=>(0,a.Z)("/api/organisation/".concat(e),{method:"PUT",body:t}),o=e=>(0,a.Z)("/api/organisation/".concat(e),{method:"DELETE",body:null})},4734:function(e,t,n){"use strict";var a=n(3827),s=n(6480),r=n.n(s),l=n(8792),i=n(2544);t.Z=e=>{let{children:t,color:n="primary",size:s="medium",type:u="solid",state:h="none",wide:m=!1,href:x,outerLink:f,block:g,className:p,loading:b=!1,...v}=e,y=x?l.default:"button";return(0,a.jsxs)(y,{href:x,disabled:b,target:f&&"_blank",className:r()("relative overflow-hidden ease-in-out duration-200 transition-all",o[n],c[h],d[s],{"btn-outline":"outline"===u,"btn-wide":m,"btn-block":g,btn:!x,"opacity-50 cursor-not-allowed":b},p),...v,children:[t,(0,a.jsx)("div",{className:r()("absolute top-0 left-0 grid w-full h-full place-items-center cursor-not-allowed",o[n],c[h],{hidden:!b}),children:(0,a.jsx)(i.Z,{})})]})};let o={primary:"btn-primary",secondary:"btn-secondary",neutral:"btn-neutral",accent:"btn-accent",ghost:"btn-ghost",link:"btn-link",none:""},c={success:"btn-success text-white",error:"btn-error text-white",warning:"btn-warning",info:"btn-info",none:""},d={small:"btn-sm",medium:"",large:"btn-lg","extra-small":"btn-xs"}},7767:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(3827),s=n(6480),r=n.n(s),l=n(7841),i=n(1930),o=n(4090);let c=(0,o.forwardRef)((e,t)=>{let{label:n,error:s,className:l,name:i,disabled:c,size:u="input-md",type:h,helpText:m,...x}=e,[f,g]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:r()("w-full form-control",l),children:[(0,a.jsxs)("label",{className:"label",htmlFor:i,children:[n&&(0,a.jsx)("span",{className:"label-text",children:n}),m&&(0,a.jsx)("span",{className:"label-text-alt",children:m})]}),(0,a.jsxs)("div",{className:r()("w-full input input-bordered outline-none overflow-hidden flex items-center",u,{"border-red-500":s,"cursor-not-allowed opacity-75":c}),children:[(0,a.jsx)("input",{...x,name:i,disabled:c,type:"password"===h?f?"text":"password":h,ref:t,className:"w-full h-full autofill:bg-none bg-none"}),"password"===h&&(0,a.jsx)(d,{visible:!f,handler:()=>{g(!f)},className:"w-6 h-6 ml-2 text-gray-400 cursor-pointer"})]}),s&&(0,a.jsx)("label",{className:"label",htmlFor:i,children:(0,a.jsx)("span",{className:"text-red-500 label-text-alt",children:s})})]})});function d(e){let{visible:t,handler:n,className:s}=e;return t?(0,a.jsx)(l.Z,{className:s,onClick:n}):(0,a.jsx)(i.Z,{className:s,onClick:n})}c.displayName="Input Field";var u={Field:{Input:c}}},3803:function(e,t,n){"use strict";var a=n(3827),s=n(4090),r=n(2235),l=n(129),i=n(8324),o=n(6480),c=n.n(o);t.Z=function(e){let{active:t,children:n,onClose:o=()=>{},title:d,dialogPanelClassName:u,fullWidth:h,headComponent:m,hideClose:x}=e;return(0,a.jsx)(l.u,{appear:!0,show:t,as:s.Fragment,children:(0,a.jsxs)(i.V,{as:"div",className:"relative z-10",onClose:o,children:[(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none backdrop-blur-sm bg-black/20"})}),(0,a.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-full p-4 text-center",children:(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(i.V.Panel,{className:c()("w-full overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative p-10",{"max-w-3xl":!h},u),children:[m,!x&&(0,a.jsx)(r.Z,{className:"absolute w-5 cursor-pointer top-4 right-4",onClick:o}),d&&(0,a.jsx)(i.V.Title,{as:"h3",className:"mb-5 text-xl font-semibold leading-6 text-gray-900",children:d}),n]})})})})]})})}},8783:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(3827),s=n(4090),r=n(2235),l=n(9259),i=n(248),o=n(2670),c=n(1270),d=n(3004),u=n(6676),h=n(3803),m=n(7767),x=n(4734);let f=i.z.object({name:i.z.string().min(1,"Name must have one character").max(200,"Name is too long")});function g(e){var t;let n,i,{active:g,visibilityDispatcher:p,type:b,prevValues:v,orgId:y}=e,j=null;switch(b){case"CREATE":j="Create New Organisation",i=d.Yu;break;case"UPDATE":j="Update Organisation Details",i=e=>{if(y)return(0,d.K1)(y,e);throw Error("org id must be provided")},n=v}let[N,w]=(0,s.useState)("IDLE"),{register:E,handleSubmit:Z,formState:{errors:C},reset:S}=(0,o.cI)({resolver:(0,c.F)(f),defaultValues:n}),k=async e=>{try{w("LOADING"),await i(e),w("SUCCESS"),"CREATE"===b?(0,u.z)(["organisations"]):(0,u.z)(["organisation",y]),p(!1),S(),setTimeout(()=>{w("IDLE")},1e3)}catch(e){w("ERROR")}};return(0,a.jsx)(h.Z,{onClose:()=>{p(!1)},active:g,title:j,children:(0,a.jsxs)("form",{onSubmit:Z(k),children:[(0,a.jsx)(m.Z.Field.Input,{label:"CREATE"===b?"What's the name?":"What's the new name?",...E("name"),error:null===(t=C.name)||void 0===t?void 0:t.message}),(0,a.jsxs)(x.Z,{block:!0,className:"mt-5",loading:"LOADING"===N,state:"ERROR"===N?"error":"SUCCESS"===N?"success":"none",children:["IDLE"===N&&"Create","ERROR"===N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{className:"w-4 h-4"}),"Some Error Occured"]}),"SUCCESS"===N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{className:"w-4 h-4"}),"Done"]})]})]})})}},2544:function(e,t,n){"use strict";var a=n(3827),s=n(6480),r=n.n(s);t.Z=e=>{let{size:t="small",color:n="none"}=e;return(0,a.jsx)("span",{className:r()("loading loading-spinner",l[t],i[n])})};let l={small:"loading-sm",medium:"loading-md",large:"loading-lg"},i={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",neutral:"text-neutral",info:"text-info",success:"text-success",warning:"text-warning",error:"text-error",gray:"text-gray-300",none:""}},2171:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var a=n(3827);n(4090);var s=n(6480),r=n.n(s),l=n(4400),i=n.n(l),o=n(1331),c=n.n(o),d=n(8461),u=n.n(d),h=n(9331),m=n.n(h);let x={poppins:u().className,manrope:i().className,inter:c().className,nunito:m().className};"".concat(i().variable," ").concat(u().variable," ").concat(m().variable);let f={100:"font-thin",200:"font-extralight",300:"font-light",400:"font-normal",500:"font-medium",600:"font-semibold",700:"font-bold",800:"font-extrabold",900:"font-black"},g={sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl"};var p={Heading:e=>{let{className:t,children:n,variant:s,boldness:l=500,italic:i=!1,underline:o=!1,fontFamily:c="manrope",size:d="base",...u}=e,h={...u,className:r()(x[c],f[l],{underline:o,italic:i},g[d],t)};switch(s){case"h1":return(0,a.jsx)("h1",{...h,children:n});case"h2":return(0,a.jsx)("h2",{...h,children:n});case"h3":return(0,a.jsx)("h3",{...h,children:n});case"h4":return(0,a.jsx)("h4",{...h,children:n});case"h5":return(0,a.jsx)("h5",{...h,children:n});case"h6":return(0,a.jsx)("h6",{...h,children:n})}},Content:e=>{let{children:t,boldness:n=500,italic:s=!1,underline:l=!1,fontFamily:i="manrope",className:o,size:c="lg",...d}=e;return(0,a.jsx)("p",{...d,className:r()({underline:l,italic:s},x[i],f[n],"text-".concat(c),o),children:t})}}},5995:function(e,t,n){"use strict";var a=n(3827);n(4090);var s=n(7907),r=n(2544);t.Z=function(e){let{children:t,loading:n,error:l}=e,i=(0,s.useRouter)();return l?(i.back(),(0,a.jsx)("div",{className:"grid w-screen h-screen place-items-center",children:(0,a.jsx)(r.Z,{color:"neutral"})})):n?(0,a.jsx)("div",{className:"grid w-screen h-screen place-items-center",children:(0,a.jsx)(r.Z,{color:"neutral"})}):t}},2342:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var a=n(3827),s=n(1126);let r=(0,n(7461).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var l=n(6540),i=n(2171),o=n(4734),c=n(9416),d=n(5995),u=n(4090),h=n(703),m=n(6480),x=n.n(m),f=n(8792),g=n(3696),p=n(94),b=n(3004),v=n(2544),y=n(8783),j={src:"/_next/static/media/organisation.880737f8.svg",height:64,width:64,blurWidth:0,blurHeight:0},N=function(){var e,t,n;let s=(0,l.a)({queryKey:["organisations"],queryFn:b.gq,refetchOnWindowFocus:!1}),[r,c]=(0,u.useState)(!1),d=s.isLoading||s.isFetching;return(0,u.useEffect)(()=>{g.ZP.fromTo(".orgCards",{yPercent:50,opacity:0},{yPercent:0,stagger:.05,delay:.1,opacity:1,ease:"elastic.out(1,0.3)"})},[s.data,d]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"h-screen p-5 mt-4 overflow-scroll bg-white rounded-lg max-h-container",children:[(null===(e=s.data)||void 0===e?void 0:e.length)===0&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full gap-3",children:[(0,a.jsx)(i.Z.Content,{boldness:600,size:"sm",className:"text-gray-400",children:"You don't have any active organisation."}),(0,a.jsxs)(o.Z,{size:"small",className:"text-white",onClick:()=>{c(!0)},children:["Create ",(0,a.jsx)(p.Z,{className:"w-5 h-5"})]})]}),d&&(0,a.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full gap-3",children:(0,a.jsx)(v.Z,{color:"gray",size:"medium"})}),!d&&(null===(t=s.data)||void 0===t?void 0:t.length)!==0&&(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-5",children:[null===(n=s.data)||void 0===n?void 0:n.map(e=>(0,a.jsx)(w,{organisation:e},e.id)),(0,a.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full duration-150 ease-in-out rounded-lg bg-gray-50/60 hover:bg-gray-100/80 aspect-square orgCards",style:{opacity:0},children:(0,a.jsx)(o.Z,{color:"none",className:"bg-gray-600 btn-circle",onClick:()=>{c(!0)},children:(0,a.jsx)(p.Z,{className:"w-5 h-5 text-white text-bold"})})})]})]}),(0,a.jsx)(y.Z,{type:"CREATE",active:r,visibilityDispatcher:c})]})};function w(e){let{organisation:t}=e;return(0,a.jsx)(f.default,{href:"/dashboard/organisation/".concat(t.id),children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center w-full h-full p-5 duration-150 ease-in-out border rounded-lg cursor-pointer aspect-square hover:shadow-md orgCards",style:{opacity:0},children:[(0,a.jsx)(h.default,{src:t.logo||j,width:64,height:64,alt:"org_logo",className:x()("w-16 h-16 mb-2",{"rounded-2xl":t.logo})}),(0,a.jsx)(i.Z.Heading,{size:"base",fontFamily:"manrope",variant:"h4",boldness:700,className:"text-center text-slate-950",children:t.name})]})})}var E=()=>{var e;let t=(0,l.a)({queryKey:["profile"],queryFn:c.Ai});return(0,a.jsx)(d.Z,{loading:t.isLoading||t.isFetching,children:(0,a.jsx)("section",{className:"grid w-screen h-screen bg-slate-50 place-items-center",children:(0,a.jsxs)("div",{className:"w-full max-w-container",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between w-full",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.Z.Heading,{size:"3xl",boldness:700,fontFamily:"manrope",variant:"h1",className:"text-slate-700",children:["Hello",", ",(0,a.jsx)("span",{className:"text-5xl font-bold text-black",children:null===(e=t.data)||void 0===e?void 0:e.name})]}),(0,a.jsx)(i.Z.Content,{size:"sm",className:"mt-4 text-slate-500",children:"Select or Create an organization from the given list."})]}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)(o.Z,{color:"none",state:"error",onClick:()=>{(0,s.signOut)()},children:["Logout",(0,a.jsx)(r,{className:"w-4 h-4"})]})})]}),(0,a.jsx)(N,{})]})})})}},241:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});class a extends Error{constructor({message:e,status:t,path:n}){super(e),this.message=e,this.status=t,this.path=n}}},6676:function(e,t,n){"use strict";n.d(t,{E:function(){return a},z:function(){return s}});let a=new(n(6068)).S;function s(e){return a.invalidateQueries({queryKey:e})}}},function(e){e.O(0,[922,250,578,334,126,426,293,971,69,744],function(){return e(e.s=996)}),_N_E=e.O()}]);